import{_ as te}from"./BxrCnKvl.js";import{u as ae,c as le}from"./BrDNHwyU.js";import{p as E,g as oe,q as H,v as ne,x as D,y as q,z as se,b as a,A as L,B as A,C as G,I as ie,a as n,D as F,E as re,e as de,r as z,i as ue,k as I,w as l,o as S,d as u,m as P,c as R,F as ce,G as me,t as B,H as fe}from"#entry";import{f as ve,V as ye,a as T,b as N,c as O,d as w,e as J}from"./HDF-tfVa.js";import{c as pe,u as be,a as K,b as Se,d as ge,e as ke,f as xe,g as Ce,h as he,m as Ve,i as Y,j as _e,k as ze,l as Ie,n as Pe,o as Be,p as Q,q as W,r as Te,s as Ne,t as U,V as p,v as Oe}from"./BjKJM1WQ.js";const we=pe("v-alert-title"),Le=E({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Ae(e,m){return{iconSize:oe(()=>{const s=new Map(e.iconSizes),c=e.iconSize??m()??"default";return s.has(c)?s.get(c):c})}}const Ee=["success","info","warning","error"],$e=E({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:ie,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ee.includes(e)},...W(),...Q(),...Be(),...Pe(),...Le(),...Ie(),...ze(),..._e(),...Y(),...G(),...Ve({variant:"flat"})},"VAlert"),je=H()({name:"VAlert",props:$e(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{emit:r,slots:s}=m;const c=ne(e,"modelValue"),f=D(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:g}=Ae(e,()=>e.prominent?44:void 0),{themeClasses:k}=q(e),{colorClasses:x,colorStyles:C,variantClasses:b}=be(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:h}=K(e),{dimensionStyles:V}=Se(e),{elevationClasses:o}=ge(e),{locationStyles:t}=ke(e),{positionClasses:i}=xe(e),{roundedClasses:d}=Ce(e),{textColorClasses:v,textColorStyles:y}=he(()=>e.borderColor),{t:X}=se(),$=D(()=>({"aria-label":X(e.closeLabel),onClick(_){c.value=!1,r("click:close",_)}}));return()=>{const _=!!(s.prepend||f.value),Z=!!(s.title||e.title),ee=!!(s.close||e.closable),j={density:e.density,icon:f.value,size:e.iconSize||e.prominent?g.value:void 0};return c.value&&a(e.tag,{class:A(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},k.value,x.value,h.value,o.value,i.value,d.value,b.value,e.class]),style:L([C.value,V.value,t.value,e.style]),role:"alert"},{default:()=>[Te(!1,"v-alert"),e.border&&n("div",{key:"border",class:A(["v-alert__border",v.value]),style:L(y.value)},null),_&&n("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?a(U,{key:"prepend-defaults",disabled:!f.value,defaults:{VIcon:{...j}}},s.prepend):a(Ne,F({key:"prepend-icon"},j),null)]),n("div",{class:"v-alert__content"},[Z&&a(we,{key:"title"},{default:()=>[s.title?.()??e.title]}),s.text?.()??e.text,s.default?.()]),s.append&&n("div",{key:"append",class:"v-alert__append"},[s.append()]),ee&&n("div",{key:"close",class:"v-alert__close"},[s.close?a(U,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[s.close?.({props:$.value})]}):a(p,F({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},$.value),null)])]})}}}),De=E({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...W(),...Q(),...Y(),...G()},"VTable"),Fe=H()({name:"VTable",props:De(),setup(e,m){let{slots:r,emit:s}=m;const{themeClasses:c}=q(e),{densityClasses:f}=K(e);return Oe(()=>a(e.tag,{class:A(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},c.value,f.value,e.class]),style:L(e.style)},{default:()=>[r.top?.(),r.default?n("div",{class:"v-table__wrapper",style:{height:re(e.height)}},[n("table",null,[r.default()])]):r.wrapper?.(),r.bottom?.()]})),{}}}),Re={class:"d-flex align-center gap-2"},M="schemaBuilder.schemas",Ge=de({__name:"index",setup(e){const m=z([]),r=z(null),{resetData:s}=ae(),c=()=>{try{const o=localStorage.getItem(M);if(o)return JSON.parse(o)}catch{}return[]},f=o=>Array.isArray(o.items)?o.items.length:Object.keys(o.items||{}).length,g=o=>Array.isArray(o.items)?le(o):o,k=o=>{const t=g(o),i=JSON.stringify(t,null,2),d=new Blob([i],{type:"application/json"}),v=URL.createObjectURL(d),y=document.createElement("a");y.href=v,y.download=`${o.name||"schema"}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(v)},x=o=>{if(!confirm(`Are you sure you want to delete the saved schema "${o.name}"? This action cannot be undone.`))return;const t=c().filter(i=>i.name!==o.name);localStorage.setItem(M,JSON.stringify(t)),m.value=t};ue(()=>{m.value=c()});const C=async()=>{const o=r.value;if(o)try{const t=await o.text(),i=JSON.parse(t);if(!i||typeof i!="object"||!i.items)throw new Error("Invalid schema: missing items");localStorage.setItem("schemaBuilder.tempImport",JSON.stringify(i)),s(),await fe("/form")}catch{alert("Invalid JSON schema file.")}finally{r.value=null}},b=z(null),h=()=>{b.value?.click()},V=o=>{const i=o.target?.files?.[0];i&&(r.value=i,C()),b.value&&(b.value.value="")};return(o,t)=>{const i=te;return S(),I(ve,{class:"pa-6"},{default:l(()=>[a(ye,null,{default:l(()=>[a(T,{cols:"12",md:"6"},{default:l(()=>[a(N,{variant:"elevated",class:"h-100 d-flex flex-column"},{default:l(()=>[a(O,null,{default:l(()=>[...t[1]||(t[1]=[u("Import JSON",-1)])]),_:1}),a(w,null,{default:l(()=>[...t[2]||(t[2]=[u(" Import a schema JSON to open it directly in the form. ",-1)])]),_:1}),a(J,{class:"mt-auto"},{default:l(()=>[a(p,{color:"primary",onClick:h},{default:l(()=>[...t[3]||(t[3]=[u("Import JSON",-1)])]),_:1}),n("input",{ref_key:"importDom",ref:b,type:"file",accept:"application/json,.json",onChange:V,style:{display:"none"}},null,544)]),_:1})]),_:1})]),_:1}),a(T,{cols:"12",md:"6"},{default:l(()=>[a(N,{variant:"elevated",class:"h-100"},{default:l(()=>[a(O,null,{default:l(()=>[...t[4]||(t[4]=[u("Schema Builder",-1)])]),_:1}),a(w,null,{default:l(()=>[...t[5]||(t[5]=[u(" Create and configure schema fields, reorder via drag-and-drop, then export JSON. ",-1)])]),_:1}),a(J,null,{default:l(()=>[a(i,{to:"/builder"},{default:l(()=>[a(p,{color:"primary"},{default:l(()=>[...t[6]||(t[6]=[u("Open Builder",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(T,{cols:"12"},{default:l(()=>[a(N,{variant:"elevated"},{default:l(()=>[a(O,null,{default:l(()=>[...t[7]||(t[7]=[u("Saved Schemas",-1)])]),_:1}),a(w,null,{default:l(()=>[P(m).length?(S(),I(Fe,{key:1},{default:l(()=>[t[13]||(t[13]=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Name"),n("th",{class:"text-left"},"Label"),n("th",{class:"text-left"},"Fields"),n("th",{class:"text-left"},"Actions")])],-1)),n("tbody",null,[(S(!0),R(ce,null,me(P(m),d=>(S(),R("tr",{key:d.name},[n("td",null,B(d.name),1),n("td",null,B(d.label||"-"),1),n("td",null,B(f(d)),1),n("td",null,[n("div",Re,[a(i,{to:`/form?name=${encodeURIComponent(d.name)}`},{default:l(()=>[a(p,{size:"small",color:"primary",onClick:t[0]||(t[0]=v=>P(s)()),"prepend-icon":"mdi-eye"},{default:l(()=>[...t[9]||(t[9]=[u("Open",-1)])]),_:1})]),_:1},8,["to"]),a(i,{to:`/builder?name=${encodeURIComponent(d.name)}`},{default:l(()=>[a(p,{class:"ml-2",color:"primary",size:"small","prepend-icon":"mdi-file-edit",variant:"tonal"},{default:l(()=>[...t[10]||(t[10]=[u("Edit",-1)])]),_:1})]),_:1},8,["to"]),a(p,{class:"ml-2",size:"small",color:"primary",onClick:v=>k(d),variant:"outlined","prepend-icon":"mdi-file-export"},{default:l(()=>[...t[11]||(t[11]=[u(" Export",-1)])]),_:1},8,["onClick"]),a(p,{class:"ml-2",size:"small",color:"error",variant:"text","prepend-icon":"mdi-delete",onClick:v=>x(d)},{default:l(()=>[...t[12]||(t[12]=[u("Delete",-1)])]),_:1},8,["onClick"])])])]))),128))])]),_:1})):(S(),I(je,{key:0,type:"info",density:"comfortable"},{default:l(()=>[...t[8]||(t[8]=[u(" No saved schemas found. ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Ge as default};
